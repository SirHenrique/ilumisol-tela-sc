<div class="grid">
  <div class="col-2">
    <span class="col-12">Origem</span>
  <div class="p-inputgroup col-12 py-0">
    <input
      pInputText
      placeholder="Selecione"
      type="text"
    />
    <button
      type="button"
      class="p-button"
      pButton
      pRipple
      icon="pi pi-search"
    ></button>
  </div>
  </div>

<p-table class="col-12" styleClass="p-datatable-gridlines" [scrollable]="true" scrollHeight="700px" #pd dataKey="codPro" [(selection)]="selectedProducts" [value]="produtos" [(selection)]="selectedProducts">
  <ng-template pTemplate="header">
    <tr>
      <th rowspan="3" pFrozenColumn>
        <p-tableHeaderCheckbox/>
      </th>
      <th rowspan="3" pFrozenColumn>Produto</th>
      <th rowspan="3" pFrozenColumn>Desc</th>
      <th rowspan="3" pFrozenColumn style="border-right: 1px solid #dee2e6 !important;">UN</th>
      <th rowspan="3" style="min-width: 90px; text-align: center;">Qtd OC</th>
      <th rowspan="3" style="min-width: 170px; text-align: center;">Qtd. Sol. Cpr. N.A</th>
      <th rowspan="3" style="min-width: 140px; text-align: center;">Qtd. Sol. Cpr.</th>
      <th rowspan="3" style="text-align: center;">Estoque</th>
      <th rowspan="3" style="text-align: center;">Aberto</th>
  </tr>
  <tr>
      <th *ngFor="let date of periodos"  colspan="2" style="text-align: center">
        {{date.periodo}}
        <p-checkbox [binary]="true" [(ngModel)]="date.selecionado"></p-checkbox>
      </th>
  </tr>
  <tr>
    <ng-container *ngFor="let date of periodos">
      <th style="min-width: 120px; text-align: center">Qtd. Calc</th>
      <th>Qtd</th>
    </ng-container>
  </tr>

  </ng-template>
  <ng-template pTemplate="body" let-produto let-rowIndex="rowIndex">
    <tr>
      <td pFrozenColumn style="padding: 0;align-items: center;display: flex;justify-content: center;"><p-tableCheckbox [value]="produto" /></td>
      <td pFrozenColumn style="padding: 0;text-align: center">{{ produto.codPro }}</td>
      <td pFrozenColumn style="min-width: 500px;padding: 0">{{ produto.desPro }}</td>
      <td pFrozenColumn style="padding: 0;text-align: center;border-right: 1px solid #dee2e6 !important;">{{ produto.un }}</td>
      <td style="padding: 0;text-align: center">{{ produto.qtdOC }}</td>
      <td style="padding: 0;text-align: center">{{ produto.qtdSolNA }}</td>
      <td style="padding: 0;text-align: center">{{ produto.qtdSol }}</td>
      <td style="padding: 0;text-align: center">{{ produto.est }}</td>
      <td style="padding: 0;text-align: center">{{ produto.abr }}</td>
      <ng-container *ngFor="let date of produto.datas; let i = index">
        <td  style="text-align: center;padding: 0">{{date.sugerido}}</td>
        <td [pEditableColumn]="date.quantidade" pEditableColumnField="quantidade" style="text-align: center;padding: 0">
          <p-cellEditor>
            <ng-template pTemplate="input">
                <input
                    pInputText
                    style="width: 100%; height: 100%; padding: 0;"
                    type="number"
                    (change)="alterandoQuantidade(produto, i, date.quantidade, rowIndex)"
                    [(ngModel)]="date.quantidade" />
            </ng-template>
            <ng-template pTemplate="output">
                {{ date.quantidade }}
            </ng-template>
        </p-cellEditor>

        </td>
      </ng-container>
    </tr>
  </ng-template>
</p-table>
</div>



<div class="progress-spinner-parent" *ngIf="vp.Buscando_WS">
  <p-progressSpinner class="progress-spinner"></p-progressSpinner>
</div>
